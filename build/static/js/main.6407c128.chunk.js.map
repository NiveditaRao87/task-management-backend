{"version":3,"sources":["components/AddArea.jsx","components/Editable.jsx","components/List.jsx","components/CardDetails.jsx","components/Modal.jsx","services/lists.js","services/cards.js","App.js","index.js"],"names":["AddArea","area","id","addNewItem","addFormWrapRef","useRef","addFormRef","useState","newItem","setNewItem","showForm","setShowForm","useEffect","handleClickOutside","e","current","contains","target","dispatchEvent","Event","cancelable","document","addEventListener","removeEventListener","className","ref","onSubmit","preventDefault","placeholder","value","onChange","autoFocus","type","onClick","Editable","children","updateElement","edit","setEdit","props","newValue","setNewValue","Card","card","onOpenCard","title","List","list","cardsInList","onAddCard","map","key","CardDetails","onCardClose","formatDate","date","Date","toLocaleString","year","month","day","hour","minute","second","on","start","timeSpent","timer","setTimer","interval","setInterval","now","clearInterval","style","position","top","right","fontSize","color","description","dueDate","push","stop","toISOString","substr","sort","a","b","Modal","show","onCloseModal","getAll","axios","get","then","response","data","create","newObject","post","update","put","getById","App","lists","setLists","showCard","setShowCard","cardToShow","setCardToShow","listService","initialLists","handleAddNewCard","cardObject","cardService","returnedCard","l","cards","concat","currentTask","handleOpenCard","length","listObject","returnedList","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.6407c128.chunk.js","sourcesContent":["import React, {useRef, useState, useEffect} from 'react'\r\nimport './AddArea.css'\r\n// Reuseable add area for both card and form\r\nconst AddArea = ({ area, id, addNewItem }) => {\r\n    \r\n    const addFormWrapRef = useRef()\r\n    const addFormRef = useRef()\r\n\r\n    const [newItem, setNewItem] = useState('')\r\n    const [showForm,setShowForm] = useState('')\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = e => {\r\n            if (addFormWrapRef.current.contains(e.target)) {\r\n                // inside click\r\n                return\r\n              }\r\n              //Submit the form on outside click, it will make a new item (list/card) if the field is not empty. \r\n              //In either case form will be closed on an outside click\r\n              addFormRef.current.dispatchEvent(new Event('submit', { cancelable: true }))\r\n        }\r\n        if(showForm){\r\n            document.addEventListener(\"mousedown\", handleClickOutside)\r\n        } else {\r\n            document.removeEventListener(\"mousedown\", handleClickOutside)\r\n        }\r\n\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\", handleClickOutside)\r\n        }\r\n    },[showForm])\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault()\r\n        newItem && addNewItem(newItem,id) // ID is passed for card to identify on which list card should be created\r\n        //Id will be null for a new list\r\n        setNewItem('')\r\n        setShowForm(false)\r\n    }\r\n\r\n    const onCancel = e => {\r\n        e.preventDefault()\r\n        setNewItem('')\r\n        setShowForm(false)\r\n    }\r\n\r\n    return showForm ?\r\n      <div className='add-form-wrapper' ref={addFormWrapRef}>\r\n      <form id='add-form' ref={addFormRef} onSubmit={onSubmit} >\r\n          <textarea  \r\n              id='add-input'\r\n              placeholder={`Enter a title for the ${area}`}\r\n              value={newItem}\r\n              onChange={e => setNewItem(e.target.value)}\r\n              autoFocus\r\n          />\r\n          <div className='add-area-btns'>\r\n            <button type='submit' className='add-btn'> Add </button>\r\n            <button type= 'reset' onClick={onCancel} className='cancel-btn'> Cancel </button>\r\n          </div>\r\n      </form>\r\n      </div>\r\n    : <button className={`add-${area}`} onClick={() => setShowForm(true)}> \r\n    <i className=\"fas fa-plus\"></i> <strong>Add {area}</strong></button>\r\n}\r\n\r\nexport default AddArea","import React, { useState } from 'react'\r\nimport './Editable.css'\r\n\r\n// The reuseable editable component is used to show a text box when an element is clicked.\r\n// When there is a tab out or when there is a click outside the textarea, it should call an update request\r\n// which will then be handled in the parent component.\r\n// This component also requires that the edit state be updated from the parent component, which can be done using useRef \r\n// and useImperativeHandle as explained here https://fullstackopen.com/en/part5/props_children_and_proptypes#references-to-components-with-ref \r\n// This component in its current state can only be used if there is just one child within this component.\r\n// This solution will work but I think I will end up using too many refs so should I use a reducer?\r\nconst Editable = ({ children, updateElement }) => {\r\n    \r\n    const [edit,setEdit] = useState(false)\r\n    const [newValue,setNewValue] = useState(children.props.children) \r\n\r\n    const handleSubmit = () => {\r\n        setEdit(false)\r\n        updateElement(newValue)\r\n    }\r\n    \r\n    return edit ? \r\n    <form onSubmit={handleSubmit}>\r\n      <textarea\r\n        className='editable'\r\n        autoFocus\r\n        value={newValue}\r\n        onChange={({ target }) => setNewValue(target.value)}\r\n      /> \r\n    </form>\r\n    : <>{ children }</>\r\n}\r\n\r\nexport default Editable","import React from 'react'\r\nimport AddArea from './AddArea'\r\nimport Editable from './Editable'\r\nimport './List.css'\r\n\r\nconst Card = ({ card, onOpenCard }) => {\r\n    \r\n    return <div className='card' onClick={() => onOpenCard(card.id)}>\r\n    <p>{card.title}</p>\r\n    </div>\r\n}\r\n\r\nconst List = ({ list, cardsInList, onAddCard, onOpenCard }) => {\r\n\r\n    return (<div className='list'>\r\n    <Editable>\r\n      <h2 className='list-title'>{list.title}</h2>\r\n    </Editable>\r\n    <div className='cards-wrapper'>\r\n      {cardsInList.map(card => <Card key={card.id} card={card} onOpenCard={onOpenCard} />)}\r\n    </div>\r\n    <AddArea  \r\n        area='card'\r\n        addNewItem={onAddCard} \r\n        id={list.id}\r\n        /> \r\n    </div>)\r\n}\r\n\r\nexport default List","import React, { useState, useEffect } from 'react'\r\n\r\nconst CardDetails = ({ card, onCardClose }) => {\r\n    \r\n    const cancelStyle = {\r\n        position: 'absolute',\r\n        top: '10px',\r\n        right: '15px',\r\n        fontSize: '1.7rem',\r\n        color: '#767c77',\r\n    }\r\n\r\n    const clockStyle = {\r\n        fontSize: '2rem'\r\n    }\r\n\r\n    const formatDate = (date) => {\r\n        return new Date(date).toLocaleString('en-GB', {year: 'numeric', month: 'short', day: 'numeric',hour: 'numeric',minute: 'numeric', second: 'numeric'})\r\n    }\r\n    \r\n    const [timer,setTimer] = useState({on: false, start: 0,timeSpent: 0}) //Stores the start time if the timer is on\r\n\r\n    useEffect(() => {\r\n        let interval\r\n        if(timer.on){\r\n            interval = setInterval(() => {\r\n                // setTimer({ ...timer,timeSpent: Math.floor((Date.now() - timer.start)/1000) })\r\n                setTimer({...timer,timeSpent: Date.now() - timer.start })\r\n            }, 1000);\r\n        } else {\r\n            clearInterval(interval)\r\n        }\r\n        return () => clearInterval(interval)\r\n    },[timer])\r\n\r\n    const onTimerClick = () => {\r\n        if(timer.on){\r\n            card.timeSpent.push({start: timer.start, stop: Date.now() }) \r\n            setTimer({on: false, start: 0,timeSpent: 0})\r\n            return\r\n        } \r\n        setTimer({ on: true, start: Date.now(), timeSpent: 0 })\r\n    } \r\n    \r\n    return <div>\r\n        <h3>{card.title}</h3>\r\n        <i className=\"fas fa-times\" style={cancelStyle} onClick={onCardClose}></i>\r\n        <p><strong>Description</strong> {card.description}</p>\r\n        <p><strong>Due date</strong> {card.dueDate}</p>\r\n        <i className=\"far fa-clock\" style={clockStyle} onClick={onTimerClick}> {timer.on? 'Stop': 'Start'} timer</i>\r\n        {timer.on && <p>{new Date(timer.timeSpent).toISOString().substr(11, 8)}</p>}\r\n        {card.timeSpent && ([...card.timeSpent]\r\n        .sort((a,b) => b.start-a.start))\r\n        .map(timeSpent => <p key={timeSpent.start} >{formatDate(timeSpent.start)} - {formatDate(timeSpent.stop)}</p> )}\r\n    </div>\r\n}\r\n\r\nexport default CardDetails\r\n","import React from 'react'\r\nimport './Modal.css'\r\n\r\nconst Modal = ({ show, children, onCloseModal }) => {\r\n    \r\n    return show ? \r\n    <div>\r\n        <div className='modal'>{ children }</div>\r\n        <div className='backdrop' onClick={onCloseModal}/>\r\n    </div>\r\n    : null\r\n}\r\n\r\nexport default Modal","import axios from 'axios'\r\nconst baseUrl = '/api/lists'\r\n\r\n// let token = null\r\n\r\n// const setToken = newToken => {\r\n//   token = `bearer ${newToken}`\r\n// }\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = async newObject => {\r\n//   const config = {\r\n//     headers: { Authorization: token },\r\n//   }\r\n\r\n  const response = await axios.post(baseUrl, newObject)\r\n  return response.data\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${ baseUrl }/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update}","import axios from 'axios'\r\nconst baseUrl = '/api/cards'\r\n\r\nconst create = async newObject => {\r\n  const response = await axios.post(baseUrl, newObject)\r\n  return response.data\r\n}\r\n\r\nconst update = async (id, newObject) => {\r\n  const response = await axios.put(`${ baseUrl }/${id}`, newObject)\r\n  return response.data\r\n}\r\n\r\nconst getById = async (id) => {\r\n    const response = await axios.get(`${ baseUrl }/${id}`)\r\n    return response.data\r\n}\r\n\r\nexport default { create, update, getById }","import React, { useState, useEffect } from 'react'\nimport List from './components/List'\nimport AddArea from './components/AddArea'\nimport CardDetails from './components/CardDetails'\nimport Modal from './components/Modal'\nimport listService from './services/lists'\nimport cardService from './services/cards'\nimport './App.css'\n\nconst App = () => {\n  \n  const [lists, setLists] = useState('')\n  // const [cards, setCards] = useState('')\n  const [showCard, setShowCard] = useState(false)\n  const [cardToShow, setCardToShow] = useState('')\n\n  useEffect(() =>{\n    listService\n      .getAll()\n      .then(initialLists => {\n        setLists(initialLists)\n      })\n      \n  },[])\n\n  const handleAddNewList = (title,...ignore) => {\n      const listObject = { title }\n      \n      listService\n      .create(listObject)\n      .then(returnedList => {\n        setLists(lists.concat(returnedList))\n      })\n  }\n  const handleAddNewCard = (title,list) => {\n      const cardObject = {\n        title,\n        list\n      }\n      cardService\n        .create(cardObject)\n        .then(returnedCard => {\n          setLists(lists.map(l => l.id !== list ? l : {...l,cards: l.cards.concat({ \n            title: returnedCard.title,\n            dueDate: returnedCard.dueDate,\n            currentTask: returnedCard.currentTask,\n            id: returnedCard.id\n          }) \n        }))\n        })\n  }\n\n  const handleOpenCard = async (id) => {  \n    setShowCard(true)\n    // setCardToShow(cards.find(card => card.id === id))\n    const returnedCard = await cardService.getById(id)\n    setCardToShow(returnedCard)\n    \n  }\n\n  return (\n    <div className='App'>\n      <header className='App-header'>\n      <h1>Task Manager</h1>\n      </header>\n      <main className='main'>\n      {lists.length !== 0 && lists.map(list => \n      <List \n        key={list.id} \n        list={list} \n        cardsInList={list.cards}\n        onAddCard={handleAddNewCard}\n        onOpenCard={handleOpenCard}\n      />)}\n      <Modal show={showCard} onCloseModal={ () => setShowCard(false)}>\n        <CardDetails card={cardToShow} onCardClose={() => setShowCard(false)} /> \n        {/* {JSON.stringify(cardToShow)} */}\n      </Modal>\n      <AddArea  \n        area='list'\n        id={null} \n        addNewItem={handleAddNewList}\n        />\n      </main>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}