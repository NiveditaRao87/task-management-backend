(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{33:function(e,t,n){e.exports=n(71)},56:function(e,t,n){},57:function(e,t,n){e.exports=n.p+"static/media/andrew-neel-ute2XAFQU2I-unsplash.74d77958.jpg"},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),i=n.n(c),l=n(31),o=n(2),u=n(3),s="loggedTaskManagerAppUser",d=function(e){return localStorage.setItem(s,JSON.stringify(e))},m=function(){return JSON.parse(localStorage.getItem(s))},f=function(){return localStorage.removeItem(s)},p=Object(a.createContext)(),b=function(e){var t=e.children,n=Object(a.useState)(!!m()),c=Object(u.a)(n,2),i={isAuthenticated:c[0],setIsAuthenticated:c[1]};return r.a.createElement(p.Provider,{value:i},t)},E=function(){return r.a.createElement("h1",null,"Register to the Task Management app")},v=n(4),h=n.n(v),g=n(7),O=function(e){var t=e.notification;if(!t)return null;var n={color:"success"===t.type?"green":"red"};return r.a.createElement("div",{style:n},t.message)},j=n(10),k=n.n(j),w={login:function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=(n(56),function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),c=t[0],i=t[1],l=Object(a.useState)(""),o=Object(u.a)(l,2),s=o[0],m=o[1],f=Object(a.useState)(""),b=Object(u.a)(f,2),E=b[0],v=b[1],j=Object(a.useContext)(p).setIsAuthenticated,k=function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,w.login({username:c,password:s});case 4:n=e.sent,i(""),m(""),d(n),j(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),y("Invalid username or password","error");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),y=function(e,t){v({message:e,type:t}),setTimeout((function(){v(null)}),5e3)};return console.log("Here I am "),r.a.createElement("div",{className:"login-page"},r.a.createElement("header",null,r.a.createElement("h1",null,"Task Management app")),r.a.createElement("main",{className:"main-login"},r.a.createElement("div",{className:"login-img-wrapper"},r.a.createElement("img",{className:"login-img",src:n(57),alt:""})),r.a.createElement("div",{className:"login-content"},r.a.createElement("h2",null,"Login"),r.a.createElement(O,{notification:E}),r.a.createElement("form",{className:"login-form",onSubmit:k},r.a.createElement("input",{className:"login-input",autoFocus:!0,type:"text",align:"center",placeholder:"Username",value:c,onChange:function(e){return i(e.target.value)}}),r.a.createElement("input",{className:"login-input",type:"password",align:"center",placeholder:"Password",value:s,onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{className:"primary",type:"submit"},"Sign in"),r.a.createElement("button",{className:"secondary"},"Register")))),r.a.createElement("footer",null,r.a.createElement("p",{className:"attribution"},r.a.createElement("span",null,"Photo by "),r.a.createElement("a",{href:"https://unsplash.com/@andrewtneel",target:"_blank",rel:"noopener noreferrer"},"Andrew Neel"),r.a.createElement("span",null," on "),r.a.createElement("a",{href:"https://unsplash.com/",target:"_blank",rel:"noopener noreferrer"},"unsplash"))))}),N=n(16),x=n(1),C=(n(58),function(e){var t=e.area,n=e.id,c=e.addNewItem,i=Object(a.useRef)(),l=Object(a.useRef)(),o=Object(a.useState)(""),s=Object(u.a)(o,2),d=s[0],m=s[1],f=Object(a.useState)(""),p=Object(u.a)(f,2),b=p[0],E=p[1];Object(a.useEffect)((function(){var e=function(e){i.current.contains(e.target)||l.current.dispatchEvent(new Event("submit",{cancelable:!0}))};return b?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[b]);return b?r.a.createElement("div",{className:"add-form-wrapper",ref:i},r.a.createElement("form",{id:"add-form",ref:l,onSubmit:function(e){e.preventDefault(),d&&c(d,n),m(""),E(!1)}},r.a.createElement("textarea",{id:"add-input",placeholder:"Enter a title for the ".concat(t),value:d,onChange:function(e){return m(e.target.value)},autoFocus:!0}),r.a.createElement("div",{className:"add-area-btns"},r.a.createElement("button",{type:"submit",className:"add-btn"}," Add "),r.a.createElement("button",{type:"reset",onClick:function(e){e.preventDefault(),m(""),E(!1)},className:"cancel-btn"}," Cancel ")))):r.a.createElement("button",{className:"add-".concat(t),onClick:function(){return E(!0)}},r.a.createElement("i",{className:"fas fa-plus"})," ",r.a.createElement("strong",null,"Add ",t))}),I=(n(59),function(e){var t=e.children,n=e.updateElement,c=e.placeholder,i=e.isEditing,l=Object(a.useState)(!1),o=Object(u.a)(l,2),s=o[0],d=o[1],m=Object(a.useState)(""),f=Object(u.a)(m,2),p=f[0],b=f[1],E=Object(a.useRef)(),v=Object(a.useRef)();Object(a.useEffect)((function(){b(t.props.children);var e=function(e){E.current.contains(e.target)||v.current.dispatchEvent(new Event("submit"))};return s?(document.addEventListener("mousedown",e),document.getElementById("editable").select()):document.removeEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[s,t.props.children]);var h=function(e){e.preventDefault(),d(!1),c!==p&&n(p)},g=function(){d(!0),i&&i(!0)};return s?r.a.createElement("div",{className:"editable-form-wrapper",ref:E},r.a.createElement("form",{className:"editable-form",ref:v,onSubmit:h},r.a.createElement("label",{htmlFor:"editable",className:"sr-only"},"Textarea for ".concat(t.props.className)),r.a.createElement("textarea",{className:"editable-".concat(t.props.className),id:"editable",autoFocus:!0,placeholder:c,value:c===p?"":p,onChange:function(e){var t=e.target;return b(t.value)},onBlur:function(e){return h(e)}}))):r.a.createElement("div",{className:"editable-child",onClick:g,onFocus:g},t)}),S=(n(60),function(e){var t=e.card,n=e.onOpenCard;return r.a.createElement("div",{tabIndex:"0",className:"card",onClick:function(){return n(t.id)},onKeyDown:function(e){return"Enter"===e.key&&n(t.id)}},r.a.createElement("p",null,t.title))}),A=function(e){var t=e.list,n=e.onAddCard,a=e.onOpenCard,c=e.updateTitle,i=e.onDelete;return r.a.createElement("div",{className:"list"},r.a.createElement(I,{updateElement:function(e){return e&&c(Object(x.a)(Object(x.a)({},t),{},{title:e}))}},r.a.createElement("h2",{tabIndex:"0",className:"list-title","aria-label":"List title"},t.title)),r.a.createElement("div",{className:"cards-wrapper"},0!==t.cards.length?t.cards.map((function(e){return r.a.createElement(S,{key:e.id,card:e,onOpenCard:a})})):r.a.createElement("div",{onClick:function(){return i(t.id)}},r.a.createElement("label",{htmlFor:"delete-list",className:"sr-only"},"Delete list"),r.a.createElement("i",{id:"delete-list",className:"fas fa-trash-alt",tabIndex:"0"}))),r.a.createElement(C,{area:"card",addNewItem:n,id:t.id}))},D=function(){return{headers:{Authorization:"bearer ".concat(m().token)}}},F={create:function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/cards",t,D());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put("".concat("/api/cards","/").concat(t),n,D());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getById:function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat("/api/cards","/").concat(t),D());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.delete("".concat("/api/cards","/").concat(t),D());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=(n(61),function(e){var t=e.lists,n=e.currentList,a=e.onMove;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"lists",className:"sr-only"},"Choose a list to move card to"),r.a.createElement("select",{id:"lists-select",onChange:function(){return a(document.getElementById("lists-select").value)}},r.a.createElement("option",{value:n.id},n.title),t.map((function(e){return e.id!==n.id&&r.a.createElement("option",{key:e.id,value:e.id},e.title)}))))}),M=function(e){var t=e.card,n=e.onCardClose,c=e.updateList,i=e.makeModalStatic,l=e.lists,o=e.removeFromList,s=Object(a.useState)(""),d=Object(u.a)(s,2),m=d[0],f=d[1],p=Object(a.useState)(""),b=Object(u.a)(p,2),E=b[0],v=b[1],h=Object(a.useState)(),g=Object(u.a)(h,2),O=(g[0],g[1]);Object(a.useEffect)((function(){var e=!1;return F.getById(t).then((function(t){!e&&f(Object(x.a)(Object(x.a)({},t),{},{tickingFrom:new Date(t.tickingFrom)}))})),function(){e=!0}}),[t]),Object(a.useEffect)((function(){var e;return m.tickingFrom?e=setInterval((function(){O(new Date(Date.now())-m.tickingFrom)}),1e3):clearInterval(e),function(){return clearInterval(e)}}),[m.tickingFrom]);var j=function(e){F.update(e.id,e).then((function(e){console.log(e),f(e),i(!1)}))};return t&&m?r.a.createElement("div",null,r.a.createElement("i",{tabIndex:"0",className:"fas fa-times",style:{position:"absolute",top:"10px",right:"15px",fontSize:"1.7rem",color:"#767c77"},onClick:function(){return n()},onKeyDown:function(e){return"Enter"===e.key&&n()}}),r.a.createElement(I,{updateElement:function(e){return function(e){j(Object(x.a)(Object(x.a)({},m),{},{list:m.list.id,title:e})),c({list:m.list.id,id:m.id,title:e})}(e)},isEditing:i},r.a.createElement("h3",{className:"card-title",tabIndex:"0"},m.title)),r.a.createElement("div",null,r.a.createElement("span",null,"in list "),E?r.a.createElement(L,{lists:l,currentList:m.list,onMove:function(e){var t=m.list.id;j(Object(x.a)(Object(x.a)({},m),{},{list:e}));var n=m.id,a=m.title,r=m.tickingFrom;c({list:e,id:n,title:a,tickingFrom:r,oldList:t}),v(!1)}}):r.a.createElement("strong",{tabIndex:"0",onClick:function(){return v(!0)},onKeyDown:function(e){return"Enter"===e.key&&v(!0)}},m.list.title)),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("strong",null,"Description"),m.description?r.a.createElement("div",{tabIndex:"0"},r.a.createElement(I,{updateElement:function(e){return j(Object(x.a)(Object(x.a)({},m),{},{list:m.list.id,description:e}))},isEditing:i},r.a.createElement("span",null,m.description))):r.a.createElement("div",null,r.a.createElement(I,{placeholder:"Add a detailed description",updateElement:function(e){return j(Object(x.a)(Object(x.a)({},m),{},{list:m.list.id,description:e}))},isEditing:i},r.a.createElement("span",null,"Add a detailed description")))),r.a.createElement("br",null),r.a.createElement("button",{className:"primary delete-card",onClick:function(){return function(e){F.remove(e.id),o(e),n()}(m)}},"Delete card")):null},T=(n(62),function(e){var t=e.children,n=e.onCloseModal,c=e.freeze,i=Object(a.useRef)();Object(a.useEffect)((function(){function e(e){var t=o.get(e.keyCode);return t&&t(e)}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}));var l=function(){!c&&n()},o=new Map([[27,l],[9,function(e){var t=i.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),n=t[0],a=t[t.length-1];document.getElementById("modal").contains(document.activeElement)||(n.focus(),e.preventDefault()),e.shiftKey||document.activeElement!==a||(n.focus(),e.preventDefault()),e.shiftKey&&document.activeElement===n&&(a.focus(),e.preventDefault())}]]);return r.a.createElement("div",null,r.a.createElement("div",{id:"modal","aria-modal":"true",role:"dialog"},r.a.createElement("div",{className:"modal-content",ref:i},t)),r.a.createElement("div",{id:"backdrop",onClick:l}))}),B=function(){return{headers:{Authorization:"bearer ".concat(m().token)}}},R={getAll:function(){return k.a.get("/api/lists",B()).then((function(e){return e.data}))},create:function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/lists",t,B());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return k.a.put("".concat("/api/lists","/").concat(e),t,B()).then((function(e){return e.data}))},remove:function(e){k.a.delete("".concat("/api/lists","/").concat(e),B())}},z=(n(63),function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),l=Object(u.a)(i,2),o=l[0],s=l[1],d=Object(a.useState)(""),m=Object(u.a)(d,2),b=m[0],E=m[1],v=Object(a.useContext)(p).setIsAuthenticated,O=Object(a.useState)(""),j=Object(u.a)(O,2),k=j[0],w=j[1];Object(a.useEffect)((function(){R.getAll().then((function(e){c(e)}))}),[]);var y=function(e,t){var a={title:e,list:t};F.create(a).then((function(e){c(n.map((function(n){return n.id!==t?n:Object(x.a)(Object(x.a)({},n),{},{cards:n.cards.concat({title:e.title,dueDate:e.dueDate,tickingFrom:e.tickingFrom,id:e.id})})})))}))},I=function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0),E(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){s(!1),E(null)},D=function(e){c(n.map((function(t){return t.id!==e.id?t:e})))},L=function(e){R.remove(e),c(n.filter((function(t){return t.id!==e})))};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Task Manager",r.a.createElement("button",{className:"primary logout",onClick:function(){f(),v(!1)}},"Logout"))),r.a.createElement("main",{className:"main"},0!==n.length&&n.map((function(e){return r.a.createElement(A,{key:e.id,list:e,onAddCard:y,onOpenCard:I,updateTitle:D,onDelete:L})})),o&&r.a.createElement(T,{onCloseModal:S,freeze:k},r.a.createElement(M,{card:b,onCardClose:S,updateList:function(e){var t=e.list,a=e.id,r=e.title,i=e.oldList;c(i?n.map((function(e){return e.id===t?Object(x.a)(Object(x.a)({},e),{},{cards:[].concat(Object(N.a)(e.cards),[{id:a,title:r}])}):e.id===i?Object(x.a)(Object(x.a)({},e),{},{cards:e.cards.filter((function(e){return e.id!==a}))}):e})):n.map((function(e){return e.id!==t?e:Object(x.a)(Object(x.a)({},e),{},{cards:e.cards.map((function(e){return e.id!==a?e:{id:a,title:r}}))})})))},makeModalStatic:function(e){return w(e)},lists:n,removeFromList:function(e){c(n.map((function(t){return t.id!==e.list.id?t:Object(x.a)(Object(x.a)({},t),{},{cards:t.cards.filter((function(t){return t.id!==e.id}))})})))}})),r.a.createElement(C,{area:"list",id:null,addNewItem:function(e){var t={title:e};R.create(t).then((function(e){c(n.concat(e))}))}})),r.a.createElement("footer",{className:"board-footer"},r.a.createElement("p",{className:"attribution"},r.a.createElement("span",null,"Photo by "),r.a.createElement("a",{href:"https://www.instagram.com/vikranthupili/",target:"_blank",rel:"noopener noreferrer"},"Vikranth Thupili"))))}),K=function(){var e=Object(a.useContext)(p).isAuthenticated;return r.a.createElement(l.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0},e?r.a.createElement(z,null):r.a.createElement(o.a,{to:"/login"})),r.a.createElement(o.b,{path:"/register",exact:!0,component:E}),r.a.createElement(o.b,{path:"/login"},e?r.a.createElement(o.a,{to:"/"}):r.a.createElement(y,null))))},J=(n(69),function(){return r.a.createElement(b,null,r.a.createElement("div",{className:"content"},r.a.createElement(K,null)))});n(70);i.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.4aa33e2d.chunk.js.map